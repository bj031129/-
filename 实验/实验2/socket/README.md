# Java聊天室应用

这是一个基于Java Swing开发的多功能聊天室应用，支持文本、图片、文件、音频和视频的传输。

## 功能特点

### 1. 基础功能
- 多用户实时聊天
- 用户上线/下线提醒
- 消息时间戳显示
- 左右对齐的消息布局（发送者在右，接收者在左）

### 2. 多媒体支持
- 图片传输
  - 支持JPG、PNG、GIF格式
  - 自动压缩大图片
  - 右键保存图片功能
  - 图片大小限制：2MB

- 文件传输
  - 支持所有类型的文件
  - 文件大小限制：10MB
  - 文件保存功能

- 音频传输
  - 支持格式：MP3、WAV、AAC、M4A
  - 使用系统默认播放器播放
  - 音频文件保存功能
  - 文件大小限制：50MB

- 视频传输
  - 支持格式：MP4、AVI、MKV、MOV
  - 使用系统默认播放器播放
  - 视频文件保存功能
  - 文件大小限制：50MB

### 3. 用户界面
- 简洁的图形界面
- 消息记录显示
- 文件传输进度提示
- 错误提示对话框

## 系统要求

- Java Runtime Environment (JRE) 8 或更高版本
- 操作系统：Windows

## 安装说明

1. 确保已安装JRE 8或更高版本
2. 下载项目文件
3. 使用Maven构建项目

## 使用说明

### 启动服务器

1. 在服务器端运行ChatServer.java
2. 在客户端运行ChatClient.java


### 基本操作
1. 输入用户名和服务器IP地址
2. 点击连接按钮
3. 在输入框中输入消息，按发送或回车键发送
4. 使用工具栏按钮发送多媒体内容

### 多媒体操作
- 发送图片：点击图片按钮，选择图片文件
- 发送文件：点击文件按钮，选择要发送的文件
- 发送音频：点击音频按钮，选择音频文件
- 发送视频：点击视频按钮，选择视频文件
- 保存图片：右键点击图片，选择"保存图片"
- 保存文件：点击"保存文件"按钮
- 播放音视频：点击对应的播放按钮


## 项目结构

```
src/main/java/hnu/chat/
├── ChatClient.java              # 客户端启动类
├── ChatServer.java              # 服务器启动类
├── client/
│   ├── network/
│   │   └── ClientConnection.java # 客户端网络连接处理
│   └── ui/
│       ├── ClientFrame.java      # 客户端主窗口
│       ├── ImageHandler.java     # 图片处理工具类
│       └── MessagePanel.java     # 消息显示面板
├── common/
│   ├── Constants.java           # 常量定义
│   └── Message.java             # 消息实体类
└── server/
    ├── network/
    │   ├── ClientHandler.java   # 服务器端客户端处理器
    │   └── ServerConnection.java # 服务器网络连接处理
    └── ui/
        └── ServerFrame.java      # 服务器主窗口
```

## 文件说明

### 客户端部分
- `ChatClient.java`: 客户端程序入口，负责启动客户端界面
- `ClientConnection.java`: 处理客户端与服务器的网络通信，包括消息的发送和接收
- `ClientFrame.java`: 客户端主窗口，包含用户界面和交互逻辑
- `ImageHandler.java`: 处理图片的压缩、编码和解码
- `MessagePanel.java`: 显示聊天消息，处理多媒体内容的显示和交互

### 服务器部分
- `ChatServer.java`: 服务器程序入口，负责启动服务器
- `ClientHandler.java`: 处理每个客户端连接，转发消息
- `ServerConnection.java`: 管理服务器端的网络连接
- `ServerFrame.java`: 服务器管理界面，显示服务器状态和日志

### 公共部分
- `Constants.java`: 定义项目中使用的常量，如端口号、文件大小限制等
- `Message.java`: 消息实体类，定义消息的结构和类型

## 核心功能实现

### 网络通信
- 使用Java Socket实现TCP连接
- 客户端启动单独线程监听服务器消息
- 服务器为每个客户端创建独立的处理线程

### 消息处理
- 使用Base64编码传输二进制数据
- 使用特殊标记区分不同类型的消息
- 支持文本、图片、文件、音频和视频等多种类型

### 用户界面
- 使用Java Swing构建图形界面
- 支持消息的左右对齐显示
- 集成文件选择器和媒体播放功能

### 文件处理
- 图片自动压缩和格式转换
- 支持多种音视频格式
- 使用系统默认程序播放媒体文件


## 技术架构

- 网络通信：Java Socket
- 用户界面：Java Swing
- 多媒体处理：
  - 图片：Java ImageIO
  - 音视频：系统默认播放器
- 数据编码：Base64
- 构建工具：Maven

## 注意事项

1. 大文件传输可能需要较长时间，请耐心等待
2. 音视频播放依赖系统默认播放器
3. 临时文件会在应用关闭后自动清理

## 开发者信息

- 开发人员：白旭
- 开发语言：Java
- 开发环境：JDK 8+
- IDE：任意支持Java的IDE（推荐IntelliJ IDEA）
- 构建工具：Maven 3.x

## 未来计划

- [ ] 添加用户认证系统
- [ ] 添加群组聊天功能
- [ ] 添加消息历史记录
- [ ] 添加文件传输进度条
- [ ] 优化大文件传输性能
- [ ] 添加表情包支持
- [ ] 添加语音消息功能